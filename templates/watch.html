<!DOCTYPE html>
<html>
<head>
  <title>Watch</title>
  <style>
    body { font-family: Arial; background:#f6f7fb; padding:20px; }
    .wrap { max-width:900px; margin:0 auto; background:#fff; border-radius:12px; padding:16px; box-shadow:0 2px 10px rgba(0,0,0,.08); }
    #player { margin-top:16px; }
    select { padding:8px 10px; border-radius:8px; border:1px solid #ddd; }
    ul { list-style:none; padding:0; }
    li { margin:6px 0; }
    a { text-decoration:none; color:#0077cc; }
    a:hover { text-decoration:underline; }
  </style>
</head>
<body>
  <div class="wrap">
    <h2>Select a video server</h2>
    <select id="videoSelect" onchange="showLink(this)">
      <option value="">Choose…</option>
      {% for v in video_options %}
      <option value="{{ v.src }}">{{ v.label }}</option>
      {% endfor %}
    </select>

    <div id="player"><p>Choose a server to preview the video and copy its link.</p></div>

    {% if subs %}
      <h3>Available Subtitles</h3>
      <ul>
        {% for s in subs %}
          <li>
            {{ s.lang }} ({{ s.name }}) →
            <a href="{{ url_for('download_sub', url=s.url, fmt='srt') }}">Download SRT</a> |
            <a href="{{ url_for('download_sub', url=s.url, fmt='vtt') }}">Download VTT</a>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>No subtitle tracks found for this server.</p>
    {% endif %}


    <div style="margin-top:12px;"><a href="javascript:history.back()">← Back</a></div>
  </div>
  <script>
    function showLink(sel){
      if(!sel.value) return;
      document.getElementById('player').innerHTML =
        `<p><b>Video link:</b> <a href="${sel.value}" target="_blank">${sel.value}</a></p>
         <iframe src="${sel.value}" width="640" height="360" frameborder="0" allowfullscreen></iframe>`;
    }
  </script>
</body>
</html>
