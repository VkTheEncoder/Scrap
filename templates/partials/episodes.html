<h2>{{ title }}</h2>
<p>Found {{ eps|length }} episodes available.</p>

<!-- Select specific episode -->
<div style="margin-top:10px;">
  <input 
    type="number" 
    id="ep_number" 
    placeholder="Enter episode number (1-{{ eps|length }})"
    style="padding:8px; border-radius:6px; border:1px solid #ccc; width:220px;"
  >
  <button 
    onclick="processEpisodeByNumber()" 
    style="padding:8px 15px; background:#6c63ff; color:white; border:none; border-radius:6px; cursor:pointer;"
    onmouseover="this.style.background='#574fd6'"
    onmouseout="this.style.background='#6c63ff'">
    â–¶ Process Selected
  </button>
</div>

<!-- Episode list -->
<div class="episode-list" style="margin-top:20px;">
  {% if eps %}
    {% for ep in eps %}
      <button
        class="ep-btn"
        data-num="{{ ep.num }}"
        data-token="{{ ep.episode_token }}"
        onclick="selectEpisode('{{ ep.episode_token }}')"
        style="
          display:inline-block;
          margin:5px;
          padding:10px 15px;
          background:#6c63ff;
          color:white;
          border:none;
          border-radius:8px;
          cursor:pointer;
          font-size:14px;
        "
        onmouseover="this.style.background='#574fd6'"
        onmouseout="this.style.background='#6c63ff'">
        Ep {{ ep.num }} - {{ ep.title }}
      </button>
    {% endfor %}
  {% else %}
    <p>No episodes found for this anime.</p>
  {% endif %}
</div>

<script>
  // Find token by episode number and forward to selectEpisode()
  function processEpisodeByNumber() {
    const n = document.getElementById('ep_number').value;
    if (!n) { alert('Enter an episode number'); return; }
    const btn = document.querySelector(`.ep-btn[data-num="${n}"]`);
    if (!btn) { alert('Invalid episode number'); return; }
    selectEpisode(btn.dataset.token);
  }
</script>
