<!DOCTYPE html>
<html>
<head>
  <title>Episodes</title>
  <style>
    body { font-family: Arial; background:#f6f7fb; padding:20px; }
    .wrap { max-width:900px; margin:0 auto; background:#fff; border-radius:12px; padding:16px; box-shadow:0 2px 10px rgba(0,0,0,.08); }
    .list { display:grid; grid-template-columns:repeat(auto-fill,minmax(240px,1fr)); gap:10px; margin-top:12px; }
    .ep { border:1px solid #eee; border-radius:10px; padding:8px; background:#fafafa; }
    .ep a { text-decoration:none; color:#111; }
    .row { margin-top:12px; display:flex; gap:8px; }
    input, button { padding:6px 10px; border-radius:8px; border:1px solid #ddd; }
    button { cursor:pointer; }
  </style>
</head>
<body>
  <div class="wrap">
    <h2>Episode List</h2>

    <!-- choose one episode by number -->
    <div class="row">
      <input type="number" id="epNum" min="1" placeholder="Enter episode number">
      <button onclick="pickEpisode()">Go</button>
      <a href="/" style="margin-left:auto">‚Üê Back to search</a>
    </div>

    <!-- or click any episode (all episode links) -->
    <div class="list">
      {% for ep in episodes %}
      <div class="ep">
        <div><b>Episode {{ ep.num }}</b></div>
        <div style="font-size:13px;opacity:.8">{{ ep.title }}</div>
        <div class="row"><a href="/watch?u={{ ep.episode_token }}">Open servers</a></div>
      </div>
      {% endfor %}
    </div>
  </div>

  <script>
    const episodes = {{ episodes|tojson }};
    function pickEpisode(){
      const num = document.getElementById('epNum').value;
      const ep = episodes.find(e => e.num == num);
      if (ep) window.location.href = "/watch?u=" + ep.episode_token;
      else alert("Episode not found");
    }
  </script>
</body>
</html>
